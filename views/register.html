<!DOCTYPE html>
<html lang="en">
<head>
  <title>FitPick</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="./style.css" type="text/css">
</head>

<body>
		<div class="login">
			<div class="login-screen">
				<div class="app-title">
					<h1>FitPick</h1>
					<h3>Register</h3>
				</div>
				<form action="/register" method="POST" id="register" encrypt="multipart/form-data">
					<div class = "login-form">
						<h4>Username</h4>
						<input type="email" id = "username"><br>
						<h4>Password</h4>
						<input type="password" id="password"><br>
						<br>
						<input type="submit" value="Register" class="btn btn-primary btn-large btn-block" >
					</div>
				</form>
				<br>
				<br>
				<a href="./login.html">
					<button>login</button>
				</a>
			</div>
		</div>

    <script>
    $("#register").submit(function(event) {
  		$.ajax({
  			url: '/register',
  			method: 'post',
  			data: {
  				username: $("#username").val(),
  				password: $("#password").val()
  			}
  		}).done(function(result) {
  			if (result.username) {
  				window.localStorage.setItem('user', JSON.stringify(result));
  				location.href = '/index.html';
  			}
  		});

  		event.preventDefault();
  		return false;
  	})
    </script>
	</form>
</body>
</html>